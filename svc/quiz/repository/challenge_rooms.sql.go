// Code generated by sqlc. DO NOT EDIT.
// source: challenge_rooms.sql

package repository

import (
	"context"

	"github.com/google/uuid"
)

const addNewChallegeRoom = `-- name: AddNewChallegeRoom :one
INSERT INTO challenge_rooms (
        challenge_id,
        prize_pool,
        players_to_start,
        time_per_question
    )
VALUES (
        $1,
        $2,
        $3,
        $4
    ) RETURNING id, challenge_id, prize_pool, players_to_start, time_per_question, status, created_at
`

type AddNewChallegeRoomParams struct {
	ChallengeID     uuid.UUID `json:"challenge_id"`
	PrizePool       float64   `json:"prize_pool"`
	PlayersToStart  int32     `json:"players_to_start"`
	TimePerQuestion int32     `json:"time_per_question"`
}

func (q *Queries) AddNewChallegeRoom(ctx context.Context, arg AddNewChallegeRoomParams) (ChallengeRoom, error) {
	row := q.queryRow(ctx, q.addNewChallegeRoomStmt, addNewChallegeRoom,
		arg.ChallengeID,
		arg.PrizePool,
		arg.PlayersToStart,
		arg.TimePerQuestion,
	)
	var i ChallengeRoom
	err := row.Scan(
		&i.ID,
		&i.ChallengeID,
		&i.PrizePool,
		&i.PlayersToStart,
		&i.TimePerQuestion,
		&i.Status,
		&i.CreatedAt,
	)
	return i, err
}

const getChallengeRoomByChallengeID = `-- name: GetChallengeRoomByChallengeID :one
SELECT id, challenge_id, prize_pool, players_to_start, time_per_question, status, created_at
FROM challenge_rooms
WHERE challenge_id = $1
`

func (q *Queries) GetChallengeRoomByChallengeID(ctx context.Context, challengeID uuid.UUID) (ChallengeRoom, error) {
	row := q.queryRow(ctx, q.getChallengeRoomByChallengeIDStmt, getChallengeRoomByChallengeID, challengeID)
	var i ChallengeRoom
	err := row.Scan(
		&i.ID,
		&i.ChallengeID,
		&i.PrizePool,
		&i.PlayersToStart,
		&i.TimePerQuestion,
		&i.Status,
		&i.CreatedAt,
	)
	return i, err
}

const getChallengeRoomByID = `-- name: GetChallengeRoomByID :one
SELECT id, challenge_id, prize_pool, players_to_start, time_per_question, status, created_at
FROM challenge_rooms
WHERE id = $1
`

func (q *Queries) GetChallengeRoomByID(ctx context.Context, id uuid.UUID) (ChallengeRoom, error) {
	row := q.queryRow(ctx, q.getChallengeRoomByIDStmt, getChallengeRoomByID, id)
	var i ChallengeRoom
	err := row.Scan(
		&i.ID,
		&i.ChallengeID,
		&i.PrizePool,
		&i.PlayersToStart,
		&i.TimePerQuestion,
		&i.Status,
		&i.CreatedAt,
	)
	return i, err
}

const updateChallengeRoomStatus = `-- name: UpdateChallengeRoomStatus :exec
UPDATE challenge_rooms
SET status = $1
WHERE id = $2
`

type UpdateChallengeRoomStatusParams struct {
	Status int32     `json:"status"`
	ID     uuid.UUID `json:"id"`
}

func (q *Queries) UpdateChallengeRoomStatus(ctx context.Context, arg UpdateChallengeRoomStatusParams) error {
	_, err := q.exec(ctx, q.updateChallengeRoomStatusStmt, updateChallengeRoomStatus, arg.Status, arg.ID)
	return err
}
